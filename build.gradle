buildscript {
  repositories {
    maven {
      url 'https://plugins.gradle.org/m2/'
    }
  }
  dependencies {
    classpath group: 'com.moowork.gradle', name: 'gradle-node-plugin', version: nodePluginVersion
  }
}

apply plugin: 'com.moowork.node'

node {
  version = nodeVersion
  download = true
}

task run(type: NpmTask) {
  args = ['start']
}

task build(type: NpmTask) {
  args = ['run', 'build']
  environment 'NODE_ENV': 'production'
}

task clean(type: Delete) {
  delete 'build'
}

run.dependsOn npmInstall
build.dependsOn clean, npmInstall
